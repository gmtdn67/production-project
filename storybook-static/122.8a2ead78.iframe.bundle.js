"use strict";(self.webpackChunkproduction_project=self.webpackChunkproduction_project||[]).push([[122],{"./src/entities/Article/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D0:()=>ArticleDetails.D,wD:()=>ArticleList.w,GA:()=>article.GA,Vv:()=>ArticleViewSelector});__webpack_require__("./node_modules/core-js/modules/es.array.map.js");var _path,classNames=__webpack_require__("./src/shared/lib/classNames/classNames.ts"),Icon=__webpack_require__("./src/shared/ui/Icon/Icon.tsx"),react=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const bi_list=function SvgBiList(props){return react.createElement("svg",_extends({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},props),_path||(_path=react.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.75 18a.75.75 0 0 1 .75-.75h15a.75.75 0 1 1 0 1.5h-15a.75.75 0 0 1-.75-.75Zm0-6a.75.75 0 0 1 .75-.75h15a.75.75 0 1 1 0 1.5h-15a.75.75 0 0 1-.75-.75Zm0-6a.75.75 0 0 1 .75-.75h15a.75.75 0 1 1 0 1.5h-15A.75.75 0 0 1 3.75 6Z"})))};var fe_tiled_path;function fe_tiled_extends(){return fe_tiled_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},fe_tiled_extends.apply(this,arguments)}const fe_tiled=function SvgFeTiled(props){return react.createElement("svg",fe_tiled_extends({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},props),fe_tiled_path||(fe_tiled_path=react.createElement("path",{d:"M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Zm7 9v5h5v-5h-5Zm-7 0v5h5v-5H6Zm7-7v5h5V6h-5ZM6 6v5h5V6H6Z"})))};var Button=__webpack_require__("./src/shared/ui/Button/Button.tsx"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),ArticleViewSelector_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[11].use[1]!./node_modules/sass-loader/dist/cjs.js!./src/entities/Article/ui/ArticleViewSelector/ArticleViewSelector.module.scss"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(ArticleViewSelector_module.Z,options);const ArticleViewSelector_ArticleViewSelector_module=ArticleViewSelector_module.Z&&ArticleViewSelector_module.Z.locals?ArticleViewSelector_module.Z.locals:void 0;var article=__webpack_require__("./src/entities/Article/model/types/article.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),viewTypes=[{view:article.GA.SMALL,icon:fe_tiled},{view:article.GA.BIG,icon:bi_list}],ArticleViewSelector=function ArticleViewSelector(props){var className=props.className,onViewCLick=props.onViewCLick,view=props.view,onClick=function onClick(newView){return function(){null==onViewCLick||onViewCLick(newView)}};return(0,jsx_runtime.jsx)("div",{className:(0,classNames.A)(ArticleViewSelector_ArticleViewSelector_module.ArticleViewSelector,{},[className]),children:viewTypes.map((function(viewType){var _classNames;return(0,jsx_runtime.jsx)(Button.zx,{theme:Button.bn.CLEAR,onClick:onClick(viewType.view),children:(0,jsx_runtime.jsx)(Icon.J,{Svg:viewType.icon,className:(0,classNames.A)("",(_classNames={},_classNames[ArticleViewSelector_ArticleViewSelector_module.notSelected]=viewType.view!==view,_classNames))})})}))})};ArticleViewSelector.displayName="ArticleViewSelector";try{ArticleViewSelector.displayName="ArticleViewSelector",ArticleViewSelector.__docgenInfo={description:"",displayName:"ArticleViewSelector",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"BIG"'},{value:'"SMALL"'}]}},onViewCLick:{defaultValue:null,description:"",name:"onViewCLick",required:!0,type:{name:"(view: ArticleView) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/entities/Article/ui/ArticleViewSelector/ArticleViewSelector.tsx#ArticleViewSelector"]={docgenInfo:ArticleViewSelector.__docgenInfo,name:"ArticleViewSelector",path:"src/entities/Article/ui/ArticleViewSelector/ArticleViewSelector.tsx#ArticleViewSelector"})}catch(__react_docgen_typescript_loader_error){}var ArticleList=__webpack_require__("./src/entities/Article/ui/ArticleList/ArticleList.tsx"),ArticleDetails=__webpack_require__("./src/entities/Article/ui/ArticleDetails/ArticleDetails.tsx")},"./src/pages/ArticlesPage/ui/ArticlesPage/ArticlesPage.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>ArticlesPage_ArticlesPage});var classNames=__webpack_require__("./src/shared/lib/classNames/classNames.ts"),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),react=__webpack_require__("./node_modules/react/index.js"),Article=__webpack_require__("./src/entities/Article/index.ts"),DynamicModuleLoader=__webpack_require__("./src/shared/lib/components/DynamicModuleLoader/DynamicModuleLoader.tsx"),useInititalEffect=__webpack_require__("./src/shared/lib/hooks/useInitialEffect/useInititalEffect.ts"),store=__webpack_require__("./src/app/providers/StoreProvider/config/store.tsx"),redux_toolkit_esm=(__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js")),getArticlesPageIsLoading=function getArticlesPageIsLoading(state){var _state$articlesPage;return(null===(_state$articlesPage=state.articlesPage)||void 0===_state$articlesPage?void 0:_state$articlesPage.isLoading)||!1},getArticlesPageError=function getArticlesPageError(state){var _state$articlesPage2;return null===(_state$articlesPage2=state.articlesPage)||void 0===_state$articlesPage2?void 0:_state$articlesPage2.error},getArticlesPageView=function getArticlesPageView(state){var _state$articlesPage3;return(null===(_state$articlesPage3=state.articlesPage)||void 0===_state$articlesPage3?void 0:_state$articlesPage3.view)||Article.GA.SMALL},getArticlesPageNum=function getArticlesPageNum(state){var _state$articlesPage4;return(null===(_state$articlesPage4=state.articlesPage)||void 0===_state$articlesPage4?void 0:_state$articlesPage4.page)||1},getArticlesPageLimit=function getArticlesPageLimit(state){var _state$articlesPage5;return null===(_state$articlesPage5=state.articlesPage)||void 0===_state$articlesPage5?void 0:_state$articlesPage5.limit},getArticlesPageHasMore=function getArticlesPageHasMore(state){var _state$articlesPage6;return null===(_state$articlesPage6=state.articlesPage)||void 0===_state$articlesPage6?void 0:_state$articlesPage6.hasMore};function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var fetchArticlesList=(0,redux_toolkit_esm.hg)("articlesPage/fetchArticlesList",function(){var _ref=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(props,thunkApi){var extra,rejectWithValue,getState,_props$page,page,limit,response;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return extra=thunkApi.extra,rejectWithValue=thunkApi.rejectWithValue,getState=thunkApi.getState,_props$page=props.page,page=void 0===_props$page?1:_props$page,limit=getArticlesPageLimit(getState()),_context.prev=3,_context.next=6,extra.api.get("/articles/",{params:{_expand:"user",_limit:limit,_page:page}});case 6:if((response=_context.sent).data){_context.next=9;break}throw new Error;case 9:return _context.abrupt("return",response.data);case 12:return _context.prev=12,_context.t0=_context.catch(3),console.log(_context.t0),_context.abrupt("return",rejectWithValue("error"));case 16:case"end":return _context.stop()}}),_callee,null,[[3,12]])})));return function(_x,_x2){return _ref.apply(this,arguments)}}()),es=__webpack_require__("./node_modules/react-redux/es/index.js"),Page=__webpack_require__("./src/shared/ui/Page/Page.tsx"),localstorage=__webpack_require__("./src/shared/const/localstorage.ts"),articlesAdapter=(0,redux_toolkit_esm.HF)({selectId:function selectId(article){return article.id}}),getArticles=articlesAdapter.getSelectors((function(state){return state.articlesPage||articlesAdapter.getInitialState()})),articlesPageSlice=(0,redux_toolkit_esm.oM)({name:"articlesPageSlice",initialState:articlesAdapter.getInitialState({isLoading:!1,error:void 0,ids:[],entities:{},view:Article.GA.SMALL,page:1,hasMore:!0}),reducers:{setView:function setView(state,action){state.view=action.payload,localStorage.setItem(localstorage.f,action.payload)},setPage:function setPage(state,action){state.page=action.payload},initState:function initState(state){var view=localStorage.getItem(localstorage.f);state.view=view,state.limit=view===Article.GA.BIG?4:9}},extraReducers:function extraReducers(builder){builder.addCase(fetchArticlesList.pending,(function(state){state.error=void 0,state.isLoading=!0})).addCase(fetchArticlesList.fulfilled,(function(state,action){state.isLoading=!1,articlesAdapter.addMany(state,action.payload),state.hasMore=action.payload.length>0})).addCase(fetchArticlesList.rejected,(function(state,action){state.isLoading=!1,state.error="string"==typeof action.payload?action.payload:"Неизвестная ошибка"}))}}),articlesPageReducer=articlesPageSlice.reducer,articlesPageActions=articlesPageSlice.actions;function fetchNextArticlesPage_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var fetchNextArticlesPage=(0,redux_toolkit_esm.hg)("articlesPage/fetchNextArticlesPage",function(){var _ref=function fetchNextArticlesPage_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){fetchNextArticlesPage_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){fetchNextArticlesPage_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(_,thunkApi){var dispatch,getState,hasMore,page,isLoading;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:dispatch=thunkApi.dispatch,getState=thunkApi.getState,hasMore=getArticlesPageHasMore(getState()),page=getArticlesPageNum(getState()),isLoading=getArticlesPageIsLoading(getState()),hasMore&&!isLoading&&(dispatch(articlesPageActions.setPage(page+1)),dispatch(fetchArticlesList({page:page+1})));case 5:case"end":return _context.stop()}}),_callee)})));return function(_x,_x2){return _ref.apply(this,arguments)}}()),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),ArticlesPage_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[11].use[1]!./node_modules/sass-loader/dist/cjs.js!./src/pages/ArticlesPage/ui/ArticlesPage/ArticlesPage.module.scss"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(ArticlesPage_module.Z,options);const ArticlesPage_ArticlesPage_module=ArticlesPage_module.Z&&ArticlesPage_module.Z.locals?ArticlesPage_module.Z.locals:void 0;var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),reducers={articlesPage:articlesPageReducer},ArticlesPage=function ArticlesPage(_ref){var className=_ref.className,dispatch=((0,useTranslation.$)().t,(0,store.T)()),articles=(0,es.v9)(getArticles.selectAll),isLoading=(0,es.v9)(getArticlesPageIsLoading),view=((0,es.v9)(getArticlesPageError),(0,es.v9)(getArticlesPageView));(0,es.v9)(getArticlesPageNum),(0,es.v9)(getArticlesPageHasMore);(0,useInititalEffect.Q)((function(){dispatch(articlesPageActions.initState()),dispatch(fetchArticlesList({page:1}))}));var onChangeView=(0,react.useCallback)((function(view){dispatch(articlesPageActions.setView(view))}),[dispatch]),onLoadNextPart=(0,react.useCallback)((function(){dispatch(fetchNextArticlesPage())}),[dispatch]);return(0,jsx_runtime.jsx)(DynamicModuleLoader.W,{reducers,removeAfterUnmount:!1,children:(0,jsx_runtime.jsxs)(Page.T,{onScrollEnd:onLoadNextPart,className:(0,classNames.A)(ArticlesPage_ArticlesPage_module.ArticlesPage,{},[className]),children:[(0,jsx_runtime.jsx)(Article.Vv,{view,onViewCLick:onChangeView}),(0,jsx_runtime.jsx)(Article.wD,{isLoading,view,articles})]})})};ArticlesPage.displayName="ArticlesPage";const ArticlesPage_ArticlesPage=(0,react.memo)(ArticlesPage);try{ArticlesPage.displayName="ArticlesPage",ArticlesPage.__docgenInfo={description:"",displayName:"ArticlesPage",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/ArticlesPage/ui/ArticlesPage/ArticlesPage.tsx#ArticlesPage"]={docgenInfo:ArticlesPage.__docgenInfo,name:"ArticlesPage",path:"src/pages/ArticlesPage/ui/ArticlesPage/ArticlesPage.tsx#ArticlesPage"})}catch(__react_docgen_typescript_loader_error){}},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[11].use[1]!./node_modules/sass-loader/dist/cjs.js!./src/entities/Article/ui/ArticleViewSelector/ArticleViewSelector.module.scss":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".src-entities-Article-ui-ArticleViewSelector-ArticleViewSelector-module__notSelected--a0vVl{fill:var(--secondary-color)}","",{version:3,sources:["webpack://./src/entities/Article/ui/ArticleViewSelector/ArticleViewSelector.module.scss"],names:[],mappings:"AAAA,4FACI,2BAAA",sourcesContent:[".notSelected {\r\n    fill: var(--secondary-color);\r\n}\r\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={notSelected:"src-entities-Article-ui-ArticleViewSelector-ArticleViewSelector-module__notSelected--a0vVl"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[11].use[1]!./node_modules/sass-loader/dist/cjs.js!./src/pages/ArticlesPage/ui/ArticlesPage/ArticlesPage.module.scss":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".src-pages-ArticlesPage-ui-ArticlesPage-ArticlesPage-module__ArticlesPage--i0h17{min-height:100%}","",{version:3,sources:["webpack://./src/pages/ArticlesPage/ui/ArticlesPage/ArticlesPage.module.scss"],names:[],mappings:"AAAA,iFACI,eAAA",sourcesContent:[".ArticlesPage {\r\n    min-height: 100%;\r\n}\r\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={ArticlesPage:"src-pages-ArticlesPage-ui-ArticlesPage-ArticlesPage-module__ArticlesPage--i0h17"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___}}]);