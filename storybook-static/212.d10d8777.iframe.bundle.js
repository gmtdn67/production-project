"use strict";(self.webpackChunkproduction_project=self.webpackChunkproduction_project||[]).push([[212],{"./src/entities/Article/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D0:()=>ArticleDetails.D,wD:()=>ArticleList.w,GA:()=>article.GA,Vv:()=>ArticleViewSelector});__webpack_require__("./node_modules/core-js/modules/es.array.map.js");var _path,classNames=__webpack_require__("./src/shared/lib/classNames/classNames.ts"),Icon=__webpack_require__("./src/shared/ui/Icon/Icon.tsx"),react=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const bi_list=function SvgBiList(props){return react.createElement("svg",_extends({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},props),_path||(_path=react.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.75 18a.75.75 0 0 1 .75-.75h15a.75.75 0 1 1 0 1.5h-15a.75.75 0 0 1-.75-.75Zm0-6a.75.75 0 0 1 .75-.75h15a.75.75 0 1 1 0 1.5h-15a.75.75 0 0 1-.75-.75Zm0-6a.75.75 0 0 1 .75-.75h15a.75.75 0 1 1 0 1.5h-15A.75.75 0 0 1 3.75 6Z"})))};var fe_tiled_path;function fe_tiled_extends(){return fe_tiled_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},fe_tiled_extends.apply(this,arguments)}const fe_tiled=function SvgFeTiled(props){return react.createElement("svg",fe_tiled_extends({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},props),fe_tiled_path||(fe_tiled_path=react.createElement("path",{d:"M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Zm7 9v5h5v-5h-5Zm-7 0v5h5v-5H6Zm7-7v5h5V6h-5ZM6 6v5h5V6H6Z"})))};var Button=__webpack_require__("./src/shared/ui/Button/Button.tsx"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),ArticleViewSelector_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[11].use[1]!./node_modules/sass-loader/dist/cjs.js!./src/entities/Article/ui/ArticleViewSelector/ArticleViewSelector.module.scss"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(ArticleViewSelector_module.Z,options);const ArticleViewSelector_ArticleViewSelector_module=ArticleViewSelector_module.Z&&ArticleViewSelector_module.Z.locals?ArticleViewSelector_module.Z.locals:void 0;var article=__webpack_require__("./src/entities/Article/model/types/article.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),viewTypes=[{view:article.GA.SMALL,icon:fe_tiled},{view:article.GA.BIG,icon:bi_list}],ArticleViewSelector=function ArticleViewSelector(props){var className=props.className,onViewCLick=props.onViewCLick,view=props.view,onClick=function onClick(newView){return function(){null==onViewCLick||onViewCLick(newView)}};return(0,jsx_runtime.jsx)("div",{className:(0,classNames.A)(ArticleViewSelector_ArticleViewSelector_module.ArticleViewSelector,{},[className]),children:viewTypes.map((function(viewType){var _classNames;return(0,jsx_runtime.jsx)(Button.zx,{theme:Button.bn.CLEAR,onClick:onClick(viewType.view),children:(0,jsx_runtime.jsx)(Icon.J,{Svg:viewType.icon,className:(0,classNames.A)("",(_classNames={},_classNames[ArticleViewSelector_ArticleViewSelector_module.notSelected]=viewType.view!==view,_classNames))})},viewType.view)}))})};ArticleViewSelector.displayName="ArticleViewSelector";try{ArticleViewSelector.displayName="ArticleViewSelector",ArticleViewSelector.__docgenInfo={description:"",displayName:"ArticleViewSelector",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"enum",value:[{value:'"BIG"'},{value:'"SMALL"'}]}},onViewCLick:{defaultValue:null,description:"",name:"onViewCLick",required:!0,type:{name:"(view: ArticleView) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/entities/Article/ui/ArticleViewSelector/ArticleViewSelector.tsx#ArticleViewSelector"]={docgenInfo:ArticleViewSelector.__docgenInfo,name:"ArticleViewSelector",path:"src/entities/Article/ui/ArticleViewSelector/ArticleViewSelector.tsx#ArticleViewSelector"})}catch(__react_docgen_typescript_loader_error){}var ArticleList=__webpack_require__("./src/entities/Article/ui/ArticleList/ArticleList.tsx"),ArticleDetails=__webpack_require__("./src/entities/Article/ui/ArticleDetails/ArticleDetails.tsx")},"./src/pages/ArticleDetailsPage/ui/ArticleDetailsPage/ArticleDetailsPage.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>ArticleDetailsPage_ArticleDetailsPage});var classNames=__webpack_require__("./src/shared/lib/classNames/classNames.ts"),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),react=__webpack_require__("./node_modules/react/index.js"),Article=__webpack_require__("./src/entities/Article/index.ts"),Text=__webpack_require__("./src/shared/ui/Text/Text.tsx"),react_router=__webpack_require__("./node_modules/react-router/index.js"),CommentList=__webpack_require__("./src/entities/Comment/ui/CommentList/CommentList.tsx"),DynamicModuleLoader=__webpack_require__("./src/shared/lib/components/DynamicModuleLoader/DynamicModuleLoader.tsx"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),useInititalEffect=__webpack_require__("./src/shared/lib/hooks/useInitialEffect/useInititalEffect.ts"),AddCommentFormAsync=(__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/web.timers.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),(0,react.lazy)((function(){return new Promise((function(resolve){setTimeout((function(){return resolve(Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"./src/features/addCommentForm/ui/AddCommentForm/AddCommentForm.tsx")))}),1500)}))})));try{AddCommentFormAsync.displayName="AddCommentFormAsync",AddCommentFormAsync.__docgenInfo={description:"",displayName:"AddCommentFormAsync",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onSendComment:{defaultValue:null,description:"",name:"onSendComment",required:!0,type:{name:"(text: string) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/features/addCommentForm/ui/AddCommentForm/AddCommentForm.async.tsx#AddCommentFormAsync"]={docgenInfo:AddCommentFormAsync.__docgenInfo,name:"AddCommentFormAsync",path:"src/features/addCommentForm/ui/AddCommentForm/AddCommentForm.async.tsx#AddCommentFormAsync"})}catch(__react_docgen_typescript_loader_error){}var Button=__webpack_require__("./src/shared/ui/Button/Button.tsx"),routeConfig=__webpack_require__("./src/shared/config/routeConfig/routeConfig.tsx"),Page=__webpack_require__("./src/shared/ui/Page/Page.tsx"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),ArticleDetailsPage_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[11].use[1]!./node_modules/sass-loader/dist/cjs.js!./src/pages/ArticleDetailsPage/ui/ArticleDetailsPage/ArticleDetailsPage.module.scss"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(ArticleDetailsPage_module.Z,options);const ArticleDetailsPage_ArticleDetailsPage_module=ArticleDetailsPage_module.Z&&ArticleDetailsPage_module.Z.locals?ArticleDetailsPage_module.Z.locals:void 0;var articleDetailsCommentsSlice=__webpack_require__("./src/pages/ArticleDetailsPage/model/slices/articleDetailsCommentsSlice.ts"),getArticleCommentsIsLoading=function getArticleCommentsIsLoading(state){var _state$articleDetails;return null===(_state$articleDetails=state.articleDetailsComments)||void 0===_state$articleDetails?void 0:_state$articleDetails.isLoading},fetchCommentsByArticleId=__webpack_require__("./src/pages/ArticleDetailsPage/model/services/fetchCommentsByArticleId/fetchCommentsByArticleId.ts"),redux_toolkit_esm=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),Users=__webpack_require__("./src/entities/Users/index.tsx"),articleDetails=__webpack_require__("./src/entities/Article/model/selectors/articleDetails.ts"),addCommentFormSlice=__webpack_require__("./src/features/addCommentForm/model/slices/addCommentFormSlice.ts");function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var addCommentForArticle=(0,redux_toolkit_esm.hg)("articleDetails/addCommentForArticle",function(){var _ref=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(text,thunkApi){var extra,dispatch,rejectWithValue,getState,userData,article,response;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(extra=thunkApi.extra,dispatch=thunkApi.dispatch,rejectWithValue=thunkApi.rejectWithValue,getState=thunkApi.getState,userData=(0,Users.m5)(getState()),article=(0,articleDetails.wq)(getState()),userData&&text&&article){_context.next=5;break}return _context.abrupt("return",rejectWithValue("no data"));case 5:return _context.prev=5,_context.next=8,extra.api.post("/comments",{articleId:null==article?void 0:article.id,userId:userData.id,text});case 8:if((response=_context.sent).data){_context.next=11;break}throw new Error;case 11:return dispatch(addCommentFormSlice.yc.setText("")),dispatch((0,fetchCommentsByArticleId.T)(article.id)),_context.abrupt("return",response.data);case 16:return _context.prev=16,_context.t0=_context.catch(5),console.log(_context.t0),_context.abrupt("return",rejectWithValue("error"));case 20:case"end":return _context.stop()}}),_callee,null,[[5,16]])})));return function(_x,_x2){return _ref.apply(this,arguments)}}()),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),reducers={articleDetailsComments:articleDetailsCommentsSlice.S},ArticleDetailsPage=(0,react.memo)((function(props){var className=props.className,navigate=(0,react_router.s0)(),t=(0,useTranslation.$)("article-details").t,id=(0,react_router.UO)().id,dispatch=(0,es.I0)(),comments=(0,es.v9)(articleDetailsCommentsSlice.l.selectAll),isLoading=(0,es.v9)(getArticleCommentsIsLoading),onSendComment=(0,react.useCallback)((function(text){dispatch(addCommentForArticle(text))}),[dispatch]),onBackToList=(0,react.useCallback)((function(){navigate(routeConfig.h3.articles)}),[navigate]);return(0,useInititalEffect.Q)((function(){dispatch((0,fetchCommentsByArticleId.T)(id))})),id?(0,jsx_runtime.jsx)(DynamicModuleLoader.W,{reducers,removeAfterUnmount:!0,children:(0,jsx_runtime.jsxs)(Page.T,{className:(0,classNames.A)(ArticleDetailsPage_ArticleDetailsPage_module.ArticleDetailsPage,{},[className]),children:[(0,jsx_runtime.jsx)(Button.zx,{onClick:onBackToList,theme:Button.bn.OUTLINE,children:t("Назад к списку")}),(0,jsx_runtime.jsx)(Article.D0,{id}),(0,jsx_runtime.jsx)(Text.xv,{className:ArticleDetailsPage_ArticleDetailsPage_module.commentTitle,title:t("Комментарии")}),(0,jsx_runtime.jsx)(AddCommentFormAsync,{onSendComment}),(0,jsx_runtime.jsx)(CommentList.$,{isLoading,comments})]})}):(0,jsx_runtime.jsx)(Page.T,{className:(0,classNames.A)(ArticleDetailsPage_ArticleDetailsPage_module.ArticleDetailsPage,{},[className]),children:t("Статья не найдена")})}));const ArticleDetailsPage_ArticleDetailsPage=(0,react.memo)(ArticleDetailsPage);try{ArticleDetailsPage.displayName="ArticleDetailsPage",ArticleDetailsPage.__docgenInfo={description:"",displayName:"ArticleDetailsPage",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/ArticleDetailsPage/ui/ArticleDetailsPage/ArticleDetailsPage.tsx#ArticleDetailsPage"]={docgenInfo:ArticleDetailsPage.__docgenInfo,name:"ArticleDetailsPage",path:"src/pages/ArticleDetailsPage/ui/ArticleDetailsPage/ArticleDetailsPage.tsx#ArticleDetailsPage"})}catch(__react_docgen_typescript_loader_error){}},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[11].use[1]!./node_modules/sass-loader/dist/cjs.js!./src/entities/Article/ui/ArticleViewSelector/ArticleViewSelector.module.scss":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".src-entities-Article-ui-ArticleViewSelector-ArticleViewSelector-module__notSelected--a0vVl{fill:var(--secondary-color)}","",{version:3,sources:["webpack://./src/entities/Article/ui/ArticleViewSelector/ArticleViewSelector.module.scss"],names:[],mappings:"AAAA,4FACI,2BAAA",sourcesContent:[".notSelected {\r\n    fill: var(--secondary-color);\r\n}\r\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={notSelected:"src-entities-Article-ui-ArticleViewSelector-ArticleViewSelector-module__notSelected--a0vVl"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[11].use[1]!./node_modules/sass-loader/dist/cjs.js!./src/pages/ArticleDetailsPage/ui/ArticleDetailsPage/ArticleDetailsPage.module.scss":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".src-pages-ArticleDetailsPage-ui-ArticleDetailsPage-ArticleDetailsPage-module__ArticleDetailsPage--adu8f{width:100%}.src-pages-ArticleDetailsPage-ui-ArticleDetailsPage-ArticleDetailsPage-module__commentTitle--foyEs{margin-top:20px}","",{version:3,sources:["webpack://./src/pages/ArticleDetailsPage/ui/ArticleDetailsPage/ArticleDetailsPage.module.scss"],names:[],mappings:"AAAA,yGACI,UAAA,CAGJ,mGACI,eAAA",sourcesContent:[".ArticleDetailsPage {\r\n    width: 100%;\r\n}\r\n\r\n.commentTitle {\r\n    margin-top: 20px;\r\n}\r\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={ArticleDetailsPage:"src-pages-ArticleDetailsPage-ui-ArticleDetailsPage-ArticleDetailsPage-module__ArticleDetailsPage--adu8f",commentTitle:"src-pages-ArticleDetailsPage-ui-ArticleDetailsPage-ArticleDetailsPage-module__commentTitle--foyEs"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___}}]);