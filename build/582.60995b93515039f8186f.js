"use strict";(self.webpackChunkproduction_project=self.webpackChunkproduction_project||[]).push([[582],{5550:(e,t,n)=>{n.d(t,{U:()=>u,g:()=>s.g});var r=n(4942),a=n(3562),o=n(5893);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){return(0,o.jsx)(a.k,l(l({},e),{},{direction:"row"}))},s=n(4092)},3582:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Be});var r,a=n(3007),o=n(5420),i=n(4092),l=n(4942),u=n(4478),s=n(7294),c=n(5401),d=n(3942);!function(e){e.INCORRECT_USER_DATA="INCORRECT_USER_DATA",e.INCORRECT_AGE="INCORRECT_AGE",e.INCORRECT_COUNTRY="INCORRECT_COUNTRY",e.NO_DATA="NO_DATA",e.SERVER_ERROR="SERVER_ERROR"}(r||(r={}));var p,f=n(1715),v=n(8312),b=n(379),h=n(2949);!function(e){e.RUB="RUB",e.EUR="EUR",e.USD="USD"}(p||(p={}));var g=n(4192),m=n(5910),x=n(6723),y=n(3855);function R(e,t){let[n,r]=(0,s.useState)(e),a=(0,y.E)(e);return(0,x.e)((()=>r(a.current)),[a,r,...t]),n}var O,C=n(3784),j=n(2351),E=n(2984),S=n(9362),N=n(1363),P=n(1497),T=n(4103),I=n(4575),w=n(6567),D=n(4157),k=n(7955),A=((O=A||{})[O.None=1]="None",O[O.Focusable=2]="Focusable",O[O.Hidden=4]="Hidden",O);let L=(0,j.yV)((function(e,t){let{features:n=1,...r}=e,a={ref:t,"aria-hidden":2==(2&n)||void 0,style:{position:"absolute",width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...4==(4&n)&&2!=(2&n)&&{display:"none"}}};return(0,j.sY)({ourProps:a,theirProps:r,slot:{},defaultTag:"div",name:"Hidden"})}));function U(e={},t=null,n=[]){for(let[r,a]of Object.entries(e))z(n,_(t,r),a);return n}function _(e,t){return e?e+"["+t+"]":t}function z(e,t,n){if(Array.isArray(n))for(let[r,a]of n.entries())z(e,_(t,r.toString()),a);else n instanceof Date?e.push([t,n.toISOString()]):"boolean"==typeof n?e.push([t,n?"1":"0"]):"string"==typeof n?e.push([t,n]):"number"==typeof n?e.push([t,`${n}`]):null==n?e.push([t,""]):U(n,t,e)}var M,Z,F=n(5466),V=n(3781),B=((Z=B||{})[Z.Open=0]="Open",Z[Z.Closed=1]="Closed",Z),Y=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Y||{}),Q=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Q||{}),G=((M=G||{})[M.OpenListbox=0]="OpenListbox",M[M.CloseListbox=1]="CloseListbox",M[M.SetDisabled=2]="SetDisabled",M[M.SetOrientation=3]="SetOrientation",M[M.GoToOption=4]="GoToOption",M[M.Search=5]="Search",M[M.ClearSearch=6]="ClearSearch",M[M.RegisterOption=7]="RegisterOption",M[M.UnregisterOption=8]="UnregisterOption",M);function W(e,t=(e=>e)){let n=null!==e.activeOptionIndex?e.options[e.activeOptionIndex]:null,r=(0,I.z2)(t(e.options.slice()),(e=>e.dataRef.current.domRef.current)),a=n?r.indexOf(n):null;return-1===a&&(a=null),{options:r,activeOptionIndex:a}}let $={1:e=>e.disabled||1===e.listboxState?e:{...e,activeOptionIndex:null,listboxState:1},0(e){if(e.disabled||0===e.listboxState)return e;let t=e.activeOptionIndex,{value:n,mode:r,compare:a}=e.propsRef.current,o=e.options.findIndex((e=>{let t=e.dataRef.current.value;return(0,E.E)(r,{1:()=>n.some((e=>a(e,t))),0:()=>a(n,t)})}));return-1!==o&&(t=o),{...e,listboxState:0,activeOptionIndex:t}},2:(e,t)=>e.disabled===t.disabled?e:{...e,disabled:t.disabled},3:(e,t)=>e.orientation===t.orientation?e:{...e,orientation:t.orientation},4(e,t){var n;if(e.disabled||1===e.listboxState)return e;let r=W(e),a=(0,P.d)(t,{resolveItems:()=>r.options,resolveActiveIndex:()=>r.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});return{...e,...r,searchQuery:"",activeOptionIndex:a,activationTrigger:null!=(n=t.trigger)?n:1}},5:(e,t)=>{if(e.disabled||1===e.listboxState)return e;let n=""!==e.searchQuery?0:1,r=e.searchQuery+t.value.toLowerCase(),a=(null!==e.activeOptionIndex?e.options.slice(e.activeOptionIndex+n).concat(e.options.slice(0,e.activeOptionIndex+n)):e.options).find((e=>{var t;return!e.dataRef.current.disabled&&(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(r))})),o=a?e.options.indexOf(a):-1;return-1===o||o===e.activeOptionIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeOptionIndex:o,activationTrigger:1}},6:e=>e.disabled||1===e.listboxState||""===e.searchQuery?e:{...e,searchQuery:""},7:(e,t)=>{let n={id:t.id,dataRef:t.dataRef},r=W(e,(e=>[...e,n]));if(null===e.activeOptionIndex){let{value:a,mode:o,compare:i}=e.propsRef.current,l=t.dataRef.current.value;(0,E.E)(o,{1:()=>a.some((e=>i(e,l))),0:()=>i(a,l)})&&(r.activeOptionIndex=r.options.indexOf(n))}return{...e,...r}},8:(e,t)=>{let n=W(e,(e=>{let n=e.findIndex((e=>e.id===t.id));return-1!==n&&e.splice(n,1),e}));return{...e,...n,activationTrigger:1}}},K=(0,s.createContext)(null);function H(e){let t=(0,s.useContext)(K);if(null===t){let t=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,H),t}return t}function q(e,t){return(0,E.E)(t.type,$,e,t)}K.displayName="ListboxContext";let J=s.Fragment,X=(0,j.yV)((function(e,t){let{value:n,name:r,onChange:a,disabled:o=!1,horizontal:i=!1,multiple:l=!1,...u}=e;const c=i?"horizontal":"vertical";let d=(0,C.T)(t),p=(0,s.useReducer)(q,{listboxState:1,propsRef:{current:{value:n,onChange:a,mode:l?1:0,compare:(0,V.z)(((e,t)=>e===t))}},labelRef:(0,s.createRef)(),buttonRef:(0,s.createRef)(),optionsRef:(0,s.createRef)(),disabled:o,orientation:c,options:[],searchQuery:"",activeOptionIndex:null,activationTrigger:1}),[{listboxState:f,propsRef:v,optionsRef:b,buttonRef:h},g]=p;v.current.value=n,v.current.mode=l?1:0,(0,x.e)((()=>{v.current.onChange=e=>(0,E.E)(v.current.mode,{0:()=>a(e),1(){let t=v.current.value.slice(),n=t.indexOf(e);return-1===n?t.push(e):t.splice(n,1),a(t)}})}),[a,v]),(0,x.e)((()=>g({type:2,disabled:o})),[o]),(0,x.e)((()=>g({type:3,orientation:c})),[c]),(0,k.O)([h,b],((e,t)=>{var n;g({type:1}),(0,I.sP)(t,I.tJ.Loose)||(e.preventDefault(),null==(n=h.current)||n.focus())}),0===f);let m=(0,s.useMemo)((()=>({open:0===f,disabled:o})),[f,o]),y={ref:d};return s.createElement(K.Provider,{value:p},s.createElement(w.up,{value:(0,E.E)(f,{0:w.ZM.Open,1:w.ZM.Closed})},null!=r&&null!=n&&U({[r]:n}).map((([e,t])=>s.createElement(L,{features:A.Hidden,...(0,j.oA)({key:e,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:e,value:t})}))),(0,j.sY)({ourProps:y,theirProps:u,slot:m,defaultTag:J,name:"Listbox"})))})),ee=(0,j.yV)((function(e,t){var n;let[r,a]=H("Listbox.Button"),o=(0,C.T)(r.buttonRef,t),i=`headlessui-listbox-button-${(0,m.M)()}`,l=(0,g.G)(),u=(0,V.z)((e=>{switch(e.key){case N.R.Space:case N.R.Enter:case N.R.ArrowDown:e.preventDefault(),a({type:0}),l.nextFrame((()=>{r.propsRef.current.value||a({type:4,focus:P.T.First})}));break;case N.R.ArrowUp:e.preventDefault(),a({type:0}),l.nextFrame((()=>{r.propsRef.current.value||a({type:4,focus:P.T.Last})}))}})),c=(0,V.z)((e=>{e.key===N.R.Space&&e.preventDefault()})),d=(0,V.z)((e=>{if((0,T.P)(e.currentTarget))return e.preventDefault();0===r.listboxState?(a({type:1}),l.nextFrame((()=>{var e;return null==(e=r.buttonRef.current)?void 0:e.focus({preventScroll:!0})}))):(e.preventDefault(),a({type:0}))})),p=R((()=>{if(r.labelRef.current)return[r.labelRef.current.id,i].join(" ")}),[r.labelRef.current,i]),f=(0,s.useMemo)((()=>({open:0===r.listboxState,disabled:r.disabled})),[r]),v=e,b={ref:o,id:i,type:(0,D.f)(e,r.buttonRef),"aria-haspopup":!0,"aria-controls":null==(n=r.optionsRef.current)?void 0:n.id,"aria-expanded":r.disabled?void 0:0===r.listboxState,"aria-labelledby":p,disabled:r.disabled,onKeyDown:u,onKeyUp:c,onClick:d};return(0,j.sY)({ourProps:b,theirProps:v,slot:f,defaultTag:"button",name:"Listbox.Button"})})),te=(0,j.yV)((function(e,t){let[n]=H("Listbox.Label"),r=`headlessui-listbox-label-${(0,m.M)()}`,a=(0,C.T)(n.labelRef,t),o=(0,V.z)((()=>{var e;return null==(e=n.buttonRef.current)?void 0:e.focus({preventScroll:!0})})),i=(0,s.useMemo)((()=>({open:0===n.listboxState,disabled:n.disabled})),[n]);return(0,j.sY)({ourProps:{ref:a,id:r,onClick:o},theirProps:e,slot:i,defaultTag:"label",name:"Listbox.Label"})})),ne=j.AN.RenderStrategy|j.AN.Static,re=(0,j.yV)((function(e,t){var n;let[r,a]=H("Listbox.Options"),o=(0,C.T)(r.optionsRef,t),i=`headlessui-listbox-options-${(0,m.M)()}`,l=(0,g.G)(),u=(0,g.G)(),c=(0,w.oJ)(),d=null!==c?c===w.ZM.Open:0===r.listboxState;(0,s.useEffect)((()=>{var e;let t=r.optionsRef.current;!t||0===r.listboxState&&t!==(null==(e=(0,F.r)(t))?void 0:e.activeElement)&&t.focus({preventScroll:!0})}),[r.listboxState,r.optionsRef]);let p=(0,V.z)((e=>{switch(u.dispose(),e.key){case N.R.Space:if(""!==r.searchQuery)return e.preventDefault(),e.stopPropagation(),a({type:5,value:e.key});case N.R.Enter:if(e.preventDefault(),e.stopPropagation(),null!==r.activeOptionIndex){let{dataRef:e}=r.options[r.activeOptionIndex];r.propsRef.current.onChange(e.current.value)}0===r.propsRef.current.mode&&(a({type:1}),(0,S.k)().nextFrame((()=>{var e;return null==(e=r.buttonRef.current)?void 0:e.focus({preventScroll:!0})})));break;case(0,E.E)(r.orientation,{vertical:N.R.ArrowDown,horizontal:N.R.ArrowRight}):return e.preventDefault(),e.stopPropagation(),a({type:4,focus:P.T.Next});case(0,E.E)(r.orientation,{vertical:N.R.ArrowUp,horizontal:N.R.ArrowLeft}):return e.preventDefault(),e.stopPropagation(),a({type:4,focus:P.T.Previous});case N.R.Home:case N.R.PageUp:return e.preventDefault(),e.stopPropagation(),a({type:4,focus:P.T.First});case N.R.End:case N.R.PageDown:return e.preventDefault(),e.stopPropagation(),a({type:4,focus:P.T.Last});case N.R.Escape:return e.preventDefault(),e.stopPropagation(),a({type:1}),l.nextFrame((()=>{var e;return null==(e=r.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));case N.R.Tab:e.preventDefault(),e.stopPropagation();break;default:1===e.key.length&&(a({type:5,value:e.key}),u.setTimeout((()=>a({type:6})),350))}})),f=R((()=>{var e,t,n;return null!=(n=null==(e=r.labelRef.current)?void 0:e.id)?n:null==(t=r.buttonRef.current)?void 0:t.id}),[r.labelRef.current,r.buttonRef.current]),v=(0,s.useMemo)((()=>({open:0===r.listboxState})),[r]),b=e,h={"aria-activedescendant":null===r.activeOptionIndex||null==(n=r.options[r.activeOptionIndex])?void 0:n.id,"aria-multiselectable":1===r.propsRef.current.mode||void 0,"aria-labelledby":f,"aria-orientation":r.orientation,id:i,onKeyDown:p,role:"listbox",tabIndex:0,ref:o};return(0,j.sY)({ourProps:h,theirProps:b,slot:v,defaultTag:"ul",features:ne,visible:d,name:"Listbox.Options"})})),ae=(0,j.yV)((function(e,t){let{disabled:n=!1,value:r,...a}=e,[o,i]=H("Listbox.Option"),l=`headlessui-listbox-option-${(0,m.M)()}`,u=null!==o.activeOptionIndex&&o.options[o.activeOptionIndex].id===l,{value:c,compare:d}=o.propsRef.current,p=(0,E.E)(o.propsRef.current.mode,{1:()=>c.some((e=>d(e,r))),0:()=>d(c,r)}),f=(0,s.useRef)(null),v=(0,C.T)(t,f);(0,x.e)((()=>{if(0!==o.listboxState||!u||0===o.activationTrigger)return;let e=(0,S.k)();return e.requestAnimationFrame((()=>{var e,t;null==(t=null==(e=f.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})})),e.dispose}),[f,u,o.listboxState,o.activationTrigger,o.activeOptionIndex]);let b=(0,s.useRef)({disabled:n,value:r,domRef:f});(0,x.e)((()=>{b.current.disabled=n}),[b,n]),(0,x.e)((()=>{b.current.value=r}),[b,r]),(0,x.e)((()=>{var e,t;b.current.textValue=null==(t=null==(e=f.current)?void 0:e.textContent)?void 0:t.toLowerCase()}),[b,f]);let h=(0,V.z)((()=>o.propsRef.current.onChange(r)));(0,x.e)((()=>(i({type:7,id:l,dataRef:b}),()=>i({type:8,id:l}))),[b,l]);let g=(0,V.z)((e=>{if(n)return e.preventDefault();h(),0===o.propsRef.current.mode&&(i({type:1}),(0,S.k)().nextFrame((()=>{var e;return null==(e=o.buttonRef.current)?void 0:e.focus({preventScroll:!0})})))})),y=(0,V.z)((()=>{if(n)return i({type:4,focus:P.T.Nothing});i({type:4,focus:P.T.Specific,id:l})})),R=(0,V.z)((()=>{n||u||i({type:4,focus:P.T.Specific,id:l,trigger:0})})),O=(0,V.z)((()=>{n||!u||i({type:4,focus:P.T.Nothing})})),N=(0,s.useMemo)((()=>({active:u,selected:p,disabled:n})),[u,p,n]);return(0,j.sY)({ourProps:{id:l,ref:v,role:"option",tabIndex:!0===n?void 0:-1,"aria-disabled":!0===n||void 0,"aria-selected":!0===p||void 0,disabled:void 0,onClick:g,onFocus:y,onPointerMove:R,onMouseMove:R,onPointerLeave:O,onMouseLeave:O},theirProps:a,slot:N,defaultTag:"li",name:"Listbox.Option"})})),oe=Object.assign(X,{Button:ee,Label:te,Options:re,Option:ae});var ie=n(5255),le=n(5550),ue=n(5893),se={"bottom left":"oFXYv034","bottom right":"Jl5DRf3z","top left":"aacUeHXS","top right":"c68gv_LQ"};function ce(e){e.className;var t=e.items,n=e.defaultValue,r=e.onChange,o=e.value,i=e.readonly,u=e.direction,c=void 0===u?"bottom right":u,d=e.label,p=[se[c]];return(0,ue.jsxs)(le.U,{gap:"4",children:[d&&(0,ue.jsx)("span",{children:"".concat(d,">")}),(0,ue.jsxs)(oe,{disabled:i,as:"div",className:(0,a.A)("LsvjvEi8",{},[]),value:o,onChange:r,children:[(0,ue.jsx)(oe.Button,{disabled:i,className:"qrO2mTX9",children:(0,ue.jsx)(ie.zx,{disabled:i,children:null!=o?o:n})}),(0,ue.jsx)(oe.Options,{className:(0,a.A)("V57wMCSt",{},p),children:null==t?void 0:t.map((function(e){return(0,ue.jsx)(oe.Option,{value:e.value,disabled:e.disabled,as:s.Fragment,children:function(t){var n,r=t.active,o=t.selected;return(0,ue.jsxs)("li",{className:(0,a.A)("mBjSAlwm",(n={},(0,l.Z)(n,"lE7gaHdr",r),(0,l.Z)(n,"yYTJVDnW",e.disabled),n)),children:[o&&"!!!",e.content]})}},e.value)}))})]})]})}var de,pe=[{value:p.RUB,content:p.RUB},{value:p.EUR,content:p.EUR},{value:p.USD,content:p.USD}],fe=(0,s.memo)((function(e){var t=e.className,n=e.value,r=e.onChange,a=e.readonly,o=(0,u.$)().t,i=(0,s.useCallback)((function(e){null==r||r(e)}),[r]);return(0,ue.jsx)(ce,{onChange:i,value:n,defaultValue:o("Укажите валюту"),items:pe,className:t,readonly:a,direction:"top right",label:o("Укажите валюту")})}));!function(e){e.Russia="Russia",e.Belarus="Belarus",e.Ukraine="Ukraine",e.Kazakhstan="Kazahstan",e.Armenia="Armenia"}(de||(de={}));var ve=[{value:de.Armenia,content:de.Armenia},{value:de.Russia,content:de.Russia},{value:de.Belarus,content:de.Belarus},{value:de.Kazakhstan,content:de.Kazakhstan},{value:de.Ukraine,content:de.Ukraine}],be=(0,s.memo)((function(e){e.className;var t=e.value,n=e.onChange,r=e.readonly,a=(0,u.$)().t,o=(0,s.useCallback)((function(e){null==n||n(e)}),[n]);return(0,ue.jsx)(ce,{onChange:o,items:ve,defaultValue:a("Укажите страну"),value:t,readonly:r,direction:"top right",label:a("Укажите страну")})}));const he={ProfileCard:"wW9jgKKD",loading:"t07ZxFGs",error:"i5YK3SSb",editing:"DjTe7269"};var ge=function(e){var t=e.className,n=e.data,r=e.isLoading,o=e.error,i=e.readonly,s=e.onChangeFirstname,c=e.onChangeLastname,d=e.onChangeAge,p=e.onChangeCity,g=e.onChangeAvatar,m=e.onChangeUsername,x=e.onChangeCountry,y=e.onChangeCurrency,R=(0,u.$)("profile").t;if(r)return(0,ue.jsx)(le.U,{justify:"center",max:!0,className:(0,a.A)(he.ProfileCard,(0,l.Z)({},he.loading,!0),[t]),children:(0,ue.jsx)(b.a,{})});if(o)return(0,ue.jsx)(le.U,{justify:"center",max:!0,className:(0,a.A)(he.ProfileCard,{},[t,he.error]),children:(0,ue.jsx)(f.xv,{theme:f.lg.ERROR,title:R("Произошла ошибка при загрузке профиля"),text:R("Попробуйте обновить страницу"),align:f.PH.CENTER})});var O=(0,l.Z)({},he.editing,!i);return(0,ue.jsxs)(le.g,{gap:"16",max:!0,className:(0,a.A)(he.ProfileCard,O,[t]),children:[(null==n?void 0:n.avatar)&&(0,ue.jsx)(le.U,{justify:"center",max:!0,className:he.avatarWrapper,children:(0,ue.jsx)(h.q,{src:null==n?void 0:n.avatar})}),(0,ue.jsx)(v.I,{value:null==n?void 0:n.first,placeholder:R("Ваше имя"),className:he.input,onChange:s,readonly:i}),(0,ue.jsx)(v.I,{value:null==n?void 0:n.lastname,placeholder:R("Ваша фамилия"),className:he.input,onChange:c,readonly:i}),(0,ue.jsx)(v.I,{value:null==n?void 0:n.age,placeholder:R("Ваш возраст"),className:he.input,onChange:d,readonly:i}),(0,ue.jsx)(v.I,{value:null==n?void 0:n.city,placeholder:R("Город"),className:he.input,onChange:p,readonly:i}),(0,ue.jsx)(v.I,{value:null==n?void 0:n.username,placeholder:R("Введите имя пользователя"),className:he.input,onChange:m,readonly:i}),(0,ue.jsx)(v.I,{value:null==n?void 0:n.avatar,placeholder:R("Введите ссылку на аватар"),className:he.input,onChange:g,readonly:i}),(0,ue.jsx)(fe,{className:he.input,value:null==n?void 0:n.currency,onChange:y,readonly:i}),(0,ue.jsx)(be,{className:he.input,value:null==n?void 0:n.country,onChange:x,readonly:i})]})},me=n(9970),xe=n(1233),ye=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.form},Re=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.isLoading},Oe=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.error},Ce=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.readonly},je=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.validateErrors},Ee=n(4268),Se=n(5861),Ne=n(4687),Pe=n.n(Ne),Te=(0,Ee.hg)("profile/fetchProfileData",function(){var e=(0,Se.Z)(Pe().mark((function e(t,n){var r,a,o;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.extra,a=n.rejectWithValue,e.prev=1,t){e.next=4;break}throw new Error;case 4:return e.next=6,r.api.get("/profile/".concat(t));case 6:if((o=e.sent).data){e.next=9;break}throw new Error;case 9:return e.abrupt("return",o.data);case 12:return e.prev=12,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",a("error"));case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}()),Ie=function(e){if(!e)return[r.NO_DATA];var t=e.first,n=e.lastname,a=e.age,o=e.country,i=[];return t&&n||i.push(r.INCORRECT_USER_DATA),a&&Number.isInteger(a)||i.push(r.INCORRECT_AGE),o||i.push(r.INCORRECT_COUNTRY),i},we=(0,Ee.hg)("profile/updateProfileData",function(){var e=(0,Se.Z)(Pe().mark((function e(t,n){var a,o,i,l,u,s;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.extra,o=n.rejectWithValue,i=n.getState,l=ye(i()),!(u=Ie(l)).length){e.next=5;break}return e.abrupt("return",o(u));case 5:return e.prev=5,e.next=8,a.api.put("/profile/".concat(null==l?void 0:l.id),l);case 8:if((s=e.sent).data){e.next=11;break}throw new Error;case 11:return e.abrupt("return",s.data);case 14:return e.prev=14,e.t0=e.catch(5),console.log(e.t0),e.abrupt("return",o([r.SERVER_ERROR]));case 18:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t,n){return e.apply(this,arguments)}}());function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ae=(0,Ee.oM)({name:"profile",initialState:{readonly:!0,isLoading:!1,error:void 0,data:void 0},reducers:{setReadonly:function(e,t){e.readonly=t.payload},cancelEdit:function(e){e.readonly=!0,e.validateErrors=void 0,e.form=e.data},updateProfile:function(e,t){e.form=ke(ke({},e.form),t.payload)}},extraReducers:function(e){e.addCase(Te.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(Te.fulfilled,(function(e,t){e.isLoading=!1,e.data=t.payload,e.form=t.payload})).addCase(Te.rejected,(function(e,t){e.isLoading=!1,e.error=t.payload})).addCase(we.pending,(function(e){e.validateErrors=void 0,e.isLoading=!0})).addCase(we.fulfilled,(function(e,t){e.isLoading=!1,e.data=t.payload,e.form=t.payload,e.readonly=!0,e.validateErrors=void 0})).addCase(we.rejected,(function(e,t){e.isLoading=!1,e.validateErrors=t.payload}))}}),Le=Ae.actions,Ue=Ae.reducer,_e=n(7081),ze=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.data},Me=function(e){var t=e.className,n=(0,u.$)("profile").t,r=(0,d.v9)(_e.m5),o=(0,d.v9)(ze),i=(null==r?void 0:r.id)===(null==o?void 0:o.id),l=(0,d.v9)(Ce),p=(0,c.T)(),v=(0,s.useCallback)((function(){p(Le.setReadonly(!1))}),[p]),b=(0,s.useCallback)((function(){p(Le.cancelEdit())}),[p]),h=(0,s.useCallback)((function(){p(we())}),[p]);return(0,ue.jsxs)(le.U,{max:!0,justify:"between",className:(0,a.A)("",{},[t]),children:[(0,ue.jsx)(f.xv,{title:n("Профиль")}),i&&(0,ue.jsx)("div",{children:l?(0,ue.jsx)(ie.zx,{className:"",theme:ie.bn.OUTLINE,onClick:v,children:n("Редактировать")}):(0,ue.jsxs)(le.U,{gap:"8",children:[(0,ue.jsx)(ie.zx,{className:"",theme:ie.bn.OUTLINE_RED,onClick:b,children:n("Отменить")}),(0,ue.jsx)(ie.zx,{className:"",theme:ie.bn.OUTLINE,onClick:h,children:n("Сохранить")})]})})]})},Ze={profile:Ue},Fe=(0,s.memo)((function(e){var t,n=e.className,o=e.id,i=(0,u.$)("profile").t,p=(0,c.T)(),v=(0,d.v9)(ye),b=(0,d.v9)(Re),h=(0,d.v9)(Oe),g=(0,d.v9)(Ce),m=(0,d.v9)(je),x=(t={},(0,l.Z)(t,r.SERVER_ERROR,i("Серверная ошибка при сохранении")),(0,l.Z)(t,r.INCORRECT_COUNTRY,i("Некорректный регион")),(0,l.Z)(t,r.NO_DATA,i("Данные не указаны")),(0,l.Z)(t,r.INCORRECT_USER_DATA,i("Имя и фамилия обязательны")),(0,l.Z)(t,r.INCORRECT_AGE,i("Некорректный возраст")),t);(0,me.Q)((function(){o&&p(Te(o))}));var y=(0,s.useCallback)((function(e){p(Le.updateProfile({first:e||""}))}),[p]),R=(0,s.useCallback)((function(e){p(Le.updateProfile({lastname:e||""}))}),[p]),O=(0,s.useCallback)((function(e){p(Le.updateProfile({city:e||""}))}),[p]),C=(0,s.useCallback)((function(e){p(Le.updateProfile({age:Number(e||0)}))}),[p]),j=(0,s.useCallback)((function(e){p(Le.updateProfile({username:e||""}))}),[p]),E=(0,s.useCallback)((function(e){p(Le.updateProfile({avatar:e||""}))}),[p]),S=(0,s.useCallback)((function(e){p(Le.updateProfile({currency:e}))}),[p]),N=(0,s.useCallback)((function(e){p(Le.updateProfile({country:e}))}),[p]);return(0,ue.jsx)(xe.W,{reducers:Ze,children:(0,ue.jsxs)(le.g,{gap:"8",max:!0,className:(0,a.A)("",{},[n]),children:[(0,ue.jsx)(Me,{}),(null==m?void 0:m.length)&&m.map((function(e){return(0,ue.jsx)(f.xv,{theme:f.lg.ERROR,text:x[e]},e)})),(0,ue.jsx)(ge,{data:v,isLoading:b,error:h,readonly:g,onChangeFirstname:y,onChangeLastname:R,onChangeAge:C,onChangeCity:O,onChangeUsername:j,onChangeAvatar:E,onChangeCurrency:S,onChangeCountry:N})]})})})),Ve=n(9250);const Be=function(e){var t=e.className,n=(0,Ve.UO)().id;return(0,ue.jsx)(o.T,{className:(0,a.A)("",{},[t]),children:(0,ue.jsx)(i.g,{gap:"16",max:!0,children:(0,ue.jsx)(Fe,{id:n})})})}},1233:(e,t,n)=>{n.d(t,{W:()=>l});var r=n(9439),a=n(7294),o=n(3942),i=n(5893),l=function(e){var t=e.children,n=e.reducers,l=e.removeAfterUnmount,u=void 0===l||l,s=(0,o.oR)(),c=(0,o.I0)();return(0,a.useEffect)((function(){var e=s.reducerManager.getMountedReducers();return Object.entries(n).forEach((function(t){var n=(0,r.Z)(t,2),a=n[0],o=n[1];e[a]||(s.reducerManager.add(a,o),c({type:"@INIT ".concat(a," reducer")}))})),function(){u&&Object.entries(n).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0];t[1],s.reducerManager.remove(n),c({type:"@DESTROY ".concat(n," reducer")})}))}}),[]),(0,i.jsx)(i.Fragment,{children:t})}},8312:(e,t,n)=>{n.d(t,{I:()=>p});var r=n(4942),a=n(9439),o=n(4925),i=n(3007),l=n(7294);var u=n(5893),s=["className","value","onChange","type","placeholder","autofocus","readonly"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=(0,l.memo)((function(e){var t=e.className,n=e.value,c=e.onChange,p=e.type,f=void 0===p?"text":p,v=e.placeholder,b=e.autofocus,h=e.readonly,g=(0,o.Z)(e,s),m=(0,l.useRef)(null),x=(0,l.useState)(!1),y=(0,a.Z)(x,2),R=y[0],O=y[1],C=(0,l.useState)(0),j=(0,a.Z)(C,2),E=j[0],S=j[1],N=R&&!h;return(0,l.useEffect)((function(){var e;b&&(O(!0),null===(e=m.current)||void 0===e||e.focus())}),[b]),(0,r.Z)({},"fTN1PnWu",h),(0,u.jsxs)("div",{className:(0,i.A)("LuFDUWoP",{},[t]),children:[v&&(0,u.jsx)("div",{className:"emAQQ85i",children:"".concat(v,">")}),(0,u.jsxs)("div",{className:"y1GiFC_L",children:[(0,u.jsx)("input",d({ref:m,type:f,value:n,onChange:function(e){null==c||c(e.target.value),S(e.target.value.length)},className:"LVdIPwcx",onFocus:function(){O(!0)},onBlur:function(){O(!1)},onSelect:function(e){var t;S((null==e||null===(t=e.target)||void 0===t?void 0:t.selectionStart)||0)},readOnly:h},g)),N&&(0,u.jsx)("span",{className:"lqMFGBuL",style:{left:"".concat(9*E,"px")}})]})]})}))}}]);