"use strict";(self.webpackChunkproduction_project=self.webpackChunkproduction_project||[]).push([[495],{8393:(d,s,f)=>{f.r(s),f.d(s,{default:()=>J});var e=f(5893),a=f(4611),t=f(4478),h=f(7294),n=f(2918),r=f(6974),i=f(4809),o=f(1905),j=f(71),c=f(1138),l=f(3048),k=f(8046);const u={CommentCard:"xIHByGcu",header:"dsH_3Oqu",username:"dw82WMzO",loading:"V0iZ1Un3"};var m=function(){return m=Object.assign||function(d){for(var s,f=1,e=arguments.length;f<e;f++)for(var a in s=arguments[f])Object.prototype.hasOwnProperty.call(s,a)&&(d[a]=s[a]);return d},m.apply(this,arguments)},v=(0,h.memo)((function(d){var s=d.className,f=d.comment;return d.isLoading?(0,e.jsxs)("div",m({className:(0,a.A)(u.CommentCard,{},[s,u.loading])},{children:[(0,e.jsxs)("div",m({className:u.header},{children:[(0,e.jsx)(c.O,{width:30,height:30,border:"50%"},void 0),(0,e.jsx)(c.O,{height:16,width:100,className:u.username},void 0)]}),void 0),(0,e.jsx)(c.O,{className:u.text,width:"100%",height:50},void 0)]}),void 0):f?(0,e.jsxs)(o.g,m({max:!0,gap:"8",className:(0,a.A)(u.CommentCard,{},[s])},{children:[(0,e.jsxs)(l.F,m({to:"".concat(k.h3.profile).concat(f.user.id),className:u.header},{children:[f.user.avatar?(0,e.jsx)(j.q,{size:30,src:f.user.avatar},void 0):null,(0,e.jsx)(i.xv,{className:u.username,title:f.user.username},void 0)]}),void 0),(0,e.jsx)(i.xv,{className:u.text,text:f.text},void 0)]}),void 0):null})),p=function(){return p=Object.assign||function(d){for(var s,f=1,e=arguments.length;f<e;f++)for(var a in s=arguments[f])Object.prototype.hasOwnProperty.call(s,a)&&(d[a]=s[a]);return d},p.apply(this,arguments)},x=(0,h.memo)((function(d){var s=d.className,f=d.isLoading,h=d.comments,n=(0,t.$)().t;return f?(0,e.jsxs)(o.g,p({gap:"16",max:!0,className:(0,a.A)("",{},[s])},{children:[(0,e.jsx)(v,{isLoading:!0},void 0),(0,e.jsx)(v,{isLoading:!0},void 0),(0,e.jsx)(v,{isLoading:!0},void 0)]}),void 0):(0,e.jsx)(o.g,p({gap:"16",max:!0,className:(0,a.A)("",{},[s])},{children:(null==h?void 0:h.length)?h.map((function(d){return(0,e.jsx)(v,{isLoading:f,comment:d},d.id)})):(0,e.jsx)(i.xv,{text:n("Комментарии отсутствуют")},void 0)}),void 0)})),g=f(1150),y=f(3942),b=f(2276),w=(0,h.lazy)((function(){return f.e(102).then(f.bind(f,102))})),C=f(6156),L=f(1269),O=function(){return O=Object.assign||function(d){for(var s,f=1,e=arguments.length;f<e;f++)for(var a in s=arguments[f])Object.prototype.hasOwnProperty.call(s,a)&&(d[a]=s[a]);return d},O.apply(this,arguments)},N=L.p.injectEndpoints({endpoints:function(d){return{getArticleRecommendationsList:d.query({query:function(d){return{url:"/articles",params:{_limit:d,asdasf:"adfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsffkjdsfhdshfkjsdsf",asdasf1:"adfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsffkjdsfhdshfkjsdsf",asdasf2:"adfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsffkjdsfhdshfkjsdsf",asdasf3:"adfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsffkjdsfhdshfkjsdsf",asdasf4:"adfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsffkjdsfhdshfkjsdsf",asdasf5:"adfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsffkjdsfhdshfkjsdsf",asdasf6:"adffmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsffkjdsfhdshfkjsdsf",asdasf7:"adfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsffkjdsfhdshfkjsdsf",asdasf8:"adfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsffkjdsfhdshfkjsdsf",asdasf9:"adfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsfadfdfmdshfkjdsfhdshfkjsdsffkjdsfhdshfkjsdsf"}}}})}},overrideExisting:!1}).useGetArticleRecommendationsListQuery,S=(0,h.memo)((function(d){var s=d.className,f=(0,t.$)().t,h=N(3),r=h.data,j=h.isLoading,c=h.error;return j||c?null:(0,e.jsxs)(o.g,O({gap:"8",className:(0,a.A)("",{},[s])},{children:[(0,e.jsx)(i.xv,{size:i.yH.L,title:f("Рекомендуем")},void 0),(0,e.jsx)(n.wD,{articles:r,target:"_blank"},void 0)]}),void 0)})),A=f(7779),I=f(4268),P=(0,I.hg)("articleDetailsPage/fetchArticleRecommendations",(function(d,s){return f=void 0,e=void 0,t=function(){var d,f,e;return function(d,s){var f,e,a,t,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function n(t){return function(n){return function(t){if(f)throw new TypeError("Generator is already executing.");for(;h;)try{if(f=1,e&&(a=2&t[0]?e.return:t[0]?e.throw||((a=e.return)&&a.call(e),0):e.next)&&!(a=a.call(e,t[1])).done)return a;switch(e=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return h.label++,{value:t[1],done:!1};case 5:h.label++,e=t[1],t=[0];continue;case 7:t=h.ops.pop(),h.trys.pop();continue;default:if(!((a=(a=h.trys).length>0&&a[a.length-1])||6!==t[0]&&2!==t[0])){h=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){h.label=t[1];break}if(6===t[0]&&h.label<a[1]){h.label=a[1],a=t;break}if(a&&h.label<a[2]){h.label=a[2],h.ops.push(t);break}a[2]&&h.ops.pop(),h.trys.pop();continue}t=s.call(d,h)}catch(d){t=[6,d],e=0}finally{f=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,n])}}}(this,(function(a){switch(a.label){case 0:d=s.extra,f=s.rejectWithValue,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,d.api.get("/articles",{params:{_limit:4}})];case 2:if(!(e=a.sent()).data)throw new Error;return[2,e.data];case 3:return a.sent(),[2,f("error")];case 4:return[2]}}))},new((a=void 0)||(a=Promise))((function(d,s){function h(d){try{r(t.next(d))}catch(d){s(d)}}function n(d){try{r(t.throw(d))}catch(d){s(d)}}function r(s){var f;s.done?d(s.value):(f=s.value,f instanceof a?f:new a((function(d){d(f)}))).then(h,n)}r((t=t.apply(f,e||[])).next())}));var f,e,a,t})),D=(0,I.HF)({selectId:function(d){return d.id}}),E=(D.getSelectors((function(d){var s;return(null===(s=d.articleDetailsPage)||void 0===s?void 0:s.recommendations)||D.getInitialState()})),(0,I.oM)({name:"articleDetailsCommentsSlice",initialState:D.getInitialState({isLoading:!1,error:void 0,ids:[],entities:{}}),reducers:{},extraReducers:function(d){d.addCase(P.pending,(function(d){d.error=void 0,d.isLoading=!0})).addCase(P.fulfilled,(function(d,s){d.isLoading=!1,D.setAll(d,s.payload)})).addCase(P.rejected,(function(d,s){d.isLoading=!1,d.error=s.payload}))}}).reducer),_=(0,I.hg)("articleDetails/fetchCommentsByArticleId",(function(d,s){return f=void 0,e=void 0,t=function(){var f,e,a;return function(d,s){var f,e,a,t,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function n(t){return function(n){return function(t){if(f)throw new TypeError("Generator is already executing.");for(;h;)try{if(f=1,e&&(a=2&t[0]?e.return:t[0]?e.throw||((a=e.return)&&a.call(e),0):e.next)&&!(a=a.call(e,t[1])).done)return a;switch(e=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return h.label++,{value:t[1],done:!1};case 5:h.label++,e=t[1],t=[0];continue;case 7:t=h.ops.pop(),h.trys.pop();continue;default:if(!((a=(a=h.trys).length>0&&a[a.length-1])||6!==t[0]&&2!==t[0])){h=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){h.label=t[1];break}if(6===t[0]&&h.label<a[1]){h.label=a[1],a=t;break}if(a&&h.label<a[2]){h.label=a[2],h.ops.push(t);break}a[2]&&h.ops.pop(),h.trys.pop();continue}t=s.call(d,h)}catch(d){t=[6,d],e=0}finally{f=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,n])}}}(this,(function(t){switch(t.label){case 0:if(f=s.extra,e=s.rejectWithValue,!d)return[2,e("error")];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,f.api.get("/comments",{params:{articleId:d,_expand:"user"}})];case 2:if(!(a=t.sent()).data)throw new Error;return[2,a.data];case 3:return t.sent(),[2,e("error")];case 4:return[2]}}))},new((a=void 0)||(a=Promise))((function(d,s){function h(d){try{r(t.next(d))}catch(d){s(d)}}function n(d){try{r(t.throw(d))}catch(d){s(d)}}function r(s){var f;s.done?d(s.value):(f=s.value,f instanceof a?f:new a((function(d){d(f)}))).then(h,n)}r((t=t.apply(f,e||[])).next())}));var f,e,a,t})),q=(0,I.HF)({selectId:function(d){return d.id}}),z=q.getSelectors((function(d){var s;return(null===(s=d.articleDetailsPage)||void 0===s?void 0:s.comments)||q.getInitialState()})),T=(0,I.oM)({name:"articleDetailsCommentsSlice",initialState:q.getInitialState({isLoading:!1,error:void 0,ids:[],entities:{}}),reducers:{},extraReducers:function(d){d.addCase(_.pending,(function(d){d.error=void 0,d.isLoading=!0})).addCase(_.fulfilled,(function(d,s){d.isLoading=!1,q.setAll(d,s.payload)})).addCase(_.rejected,(function(d,s){d.isLoading=!1,d.error=s.payload}))}}).reducer,U=(0,A.UY)({recommendations:E,comments:T}),G=f(3574),H=f(3101),R=(0,I.hg)("articleDetails/addCommentForArticle",(function(d,s){return f=void 0,e=void 0,t=function(){var f,e,a,t,h,n,r;return function(d,s){var f,e,a,t,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function n(t){return function(n){return function(t){if(f)throw new TypeError("Generator is already executing.");for(;h;)try{if(f=1,e&&(a=2&t[0]?e.return:t[0]?e.throw||((a=e.return)&&a.call(e),0):e.next)&&!(a=a.call(e,t[1])).done)return a;switch(e=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return h.label++,{value:t[1],done:!1};case 5:h.label++,e=t[1],t=[0];continue;case 7:t=h.ops.pop(),h.trys.pop();continue;default:if(!((a=(a=h.trys).length>0&&a[a.length-1])||6!==t[0]&&2!==t[0])){h=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){h.label=t[1];break}if(6===t[0]&&h.label<a[1]){h.label=a[1],a=t;break}if(a&&h.label<a[2]){h.label=a[2],h.ops.push(t);break}a[2]&&h.ops.pop(),h.trys.pop();continue}t=s.call(d,h)}catch(d){t=[6,d],e=0}finally{f=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,n])}}}(this,(function(i){switch(i.label){case 0:if(f=s.extra,e=s.dispatch,a=s.rejectWithValue,t=s.getState,h=(0,G.m5)(t()),n=(0,H.wq)(t()),!h||!d||!n)return[2,a("no data")];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,f.api.post("/comments",{articleId:n.id,userId:h.id,text:d})];case 2:if(!(r=i.sent()).data)throw new Error;return e(_(n.id)),[2,r.data];case 3:return i.sent(),[2,a("error")];case 4:return[2]}}))},new((a=void 0)||(a=Promise))((function(d,s){function h(d){try{r(t.next(d))}catch(d){s(d)}}function n(d){try{r(t.throw(d))}catch(d){s(d)}}function r(s){var f;s.done?d(s.value):(f=s.value,f instanceof a?f:new a((function(d){d(f)}))).then(h,n)}r((t=t.apply(f,e||[])).next())}));var f,e,a,t}));const W="adu8fSDx";var F=function(d){var s,f;return null===(f=null===(s=d.articleDetailsPage)||void 0===s?void 0:s.comments)||void 0===f?void 0:f.isLoading},V=f(9161),$=(0,f(2222).P1)(n.wq,G.m5,(function(d,s){return!(!d||!s)&&d.user.id===s.id})),M=function(){return M=Object.assign||function(d){for(var s,f=1,e=arguments.length;f<e;f++)for(var a in s=arguments[f])Object.prototype.hasOwnProperty.call(s,a)&&(d[a]=s[a]);return d},M.apply(this,arguments)},B=function(d){var s=d.className,f=(0,t.$)("article-details").t,i=(0,r.s0)(),j=((0,y.v9)(G.m5),(0,y.v9)(n.wq)),c=(0,y.v9)($),l=(0,h.useCallback)((function(){i(k.h3.articles)}),[i]),u=(0,h.useCallback)((function(){i("".concat(k.h3.article_details).concat(null==j?void 0:j.id,"/edit"))}),[i,null==j?void 0:j.id]);return(0,e.jsxs)(o.U,M({max:!0,justify:"between",className:(0,a.A)("",{},[s])},{children:[(0,e.jsx)(V.zx,M({theme:V.bn.OUTLINE,onClick:l},{children:f("Назад к списку")}),void 0),c&&(0,e.jsx)(V.zx,M({theme:V.bn.OUTLINE,onClick:u},{children:f("Редактировать")}),void 0)]}),void 0)},Q=function(){return Q=Object.assign||function(d){for(var s,f=1,e=arguments.length;f<e;f++)for(var a in s=arguments[f])Object.prototype.hasOwnProperty.call(s,a)&&(d[a]=s[a]);return d},Q.apply(this,arguments)},Y={articleDetailsPage:U},Z=function(d){var s=d.className,f=(0,t.$)("article-details").t,j=(0,r.UO)().id,c=(0,y.I0)(),l=(0,y.v9)(z.selectAll),u=(0,y.v9)(F),m=(0,r.s0)(),v=((0,h.useCallback)((function(){m(k.h3.articles)}),[m]),(0,h.useCallback)((function(d){c(R(d))}),[c]));return(0,b.Q)((function(){c(_(j))})),j?(0,e.jsx)(g.W,Q({reducers:Y,removeAfterUnmount:!0},{children:(0,e.jsx)(C.T,Q({className:(0,a.A)(W,{},[s])},{children:(0,e.jsxs)(o.g,Q({gap:"16",max:!0},{children:[(0,e.jsx)(B,{},void 0),(0,e.jsx)(n.D0,{id:j},void 0),(0,e.jsx)(S,{},void 0),(0,e.jsx)(i.xv,{size:i.yH.L,className:"foyEsCeG",title:f("Комментарии")},void 0),(0,e.jsx)(w,{onSendComment:v},void 0),(0,e.jsx)(x,{isLoading:u,comments:l},void 0)]}),void 0)}),void 0)}),void 0):(0,e.jsx)(C.T,Q({className:(0,a.A)(W,{},[s])},{children:f("Статья не найдена")}),void 0)};const J=(0,h.memo)(Z)}}]);